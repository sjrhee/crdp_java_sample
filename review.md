# 코드 리뷰: crdp_java_sample

## 1. 개요
`crdp_java_sample` 저장소는 CipherTrust RESTful Data Protection (CRDP) API와 상호 작용하기 위한 가볍고 외부 의존성이 없는 Java 데모입니다. Maven이나 Gradle과 같은 복잡한 빌드 도구 없이 데이터 보호(암호화/토큰화) 및 복원(복호화/디토큰화) 기능을 테스트할 수 있는 간단한 방법을 제공합니다.

## 2. 프로젝트 구조
프로젝트 구조는 평면적이고 단순합니다:
- **소스 코드**:
  - `SimpleDemo.java`: 전체 CLI 옵션, HTTP/HTTPS 및 속성 구성을 지원하는 주요 데모 클래스입니다.
  - `MinimalDemo.java`: HTTPS와 JWT에 중점을 둔 축소 버전으로, 주로 구성 파일에 의존합니다.
- **구성**:
  - `SimpleDemo.properties` & `MinimalDemo.properties`: 호스트, 포트, 정책 및 기타 설정을 위한 구성 파일입니다.
- **스크립트**:
  - `build.sh`: Java 파일을 컴파일하고 실행 스크립트를 생성하는 간단한 쉘 스크립트입니다.
  - `run.sh` & `run_minimal.sh`: 컴파일된 클래스를 실행하기 위한 래퍼 스크립트입니다.

## 3. 코드 분석

### 3.1. 제로 의존성 구현
가장 주목할 만한 특징은 외부 라이브러리(JSON용 Jackson/Gson 또는 Apache HttpClient 등)가 전혀 없다는 점입니다.
- **HTTP 클라이언트**: 표준 `java.net.HttpURLConnection` 및 `javax.net.ssl.HttpsURLConnection`을 사용합니다.
- **JSON 파싱**: JSON 문자열을 파싱하기 위해 사용자 정의 `extractValue` 메서드를 구현합니다.
  - *관찰*: 이로 인해 프로젝트가 가벼워지지만, JSON에 대한 수동 문자열 조작은 일반적으로 깨지기 쉽습니다. 그러나 CRDP API의 구체적이고 예측 가능한 응답 형식의 경우 충분해 보입니다.

### 3.2. SimpleDemo.java
- **유연성**: 다양한 구성 방법(CLI 인수 > 속성 파일 > 하드코딩된 기본값)을 지원합니다.
- **오류 처리**: 네트워크 문제 및 HTTP 상태 코드에 대한 기본적인 오류 처리를 제공합니다.
- **SSL/TLS**: 인증서 검증을 우회하는 `getInsecureSslContext()` 메서드를 포함합니다.
  - *보안 참고*: 이는 자체 서명 인증서(내부 CRDP 배포에서 일반적임)로 테스트하기 위해 명시적으로 설계되었지만, 사용자는 위험을 이해하지 않고 프로덕션 코드에 이 패턴을 복사하지 않도록 주의해야 합니다.

### 3.3. MinimalDemo.java
- **초점**: 보안 사용 사례(HTTPS + JWT)에 특별히 맞춰져 있습니다.
- **단순화**: CLI 파싱 로직을 제거하여 핵심 API 상호 작용 로직만 원하는 개발자가 코드를 더 쉽게 읽을 수 있도록 합니다.

## 4. 장점 및 단점

### 장점
- **마찰 없음**: 빌드 도구(Maven/Gradle)가 필요하지 않습니다. `javac`만 있으면 됩니다.
- **이식성**: 단일 파일 소스 코드는 다른 프로젝트나 환경에 복사하여 붙여넣기 쉽습니다.
- **명확성**: 원시 HTTP 구현은 네트워크 상에서 무슨 일이 일어나고 있는지 명확하게 보여주며, 이는 교육 목적으로 훌륭합니다.

### 단점
- **깨지기 쉬운 JSON 파싱**: 정규식/문자열 기반 JSON 파싱(`extractValue`)은 API 응답 형식이 크게 변경되는 경우(예: 중첩 객체 또는 공백 변경) 깨질 수 있지만, 기본적인 공백은 잘 처리합니다.
- **불안전한 SSL 기본값**: 코드는 TLS가 활성화될 때 모든 인증서를 신뢰하도록 기본 설정되어 있습니다. 많은 테스트 환경에서 필요하지만, 맹목적으로 복사할 경우 나쁜 보안 관행을 조장합니다.

## 5. 결론
이 저장소는 CRDP를 위한 "빠른 시작" 또는 "스모크 테스트" 도구로서의 목적을 잘 수행합니다. 개발자가 전체 개발 환경을 설정하지 않고도 연결 및 정책 구성을 즉시 확인할 수 있도록 합니다.

**권장 사항**: 초기 테스트 및 API 흐름 이해를 위해 이것을 사용하십시오. 프로덕션 통합의 경우, 네트워킹 및 JSON 파싱 로직을 강력한 라이브러리(예: Spring WebClient, Jackson 등)로 대체하고 적절한 SSL 인증서 검증을 구현하십시오.
